this.Basis=function(t){function e(i){if(r[i])return r[i].exports;var s=r[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";var i=function(t){return t&&t.__esModule?t:{"default":t}},s=function(t){return t&&t.__esModule?t["default"]:t},n=s(r(2)),o=s(r(1)),a=s(r(8)),h=i(r(9)),u=i(r(3)),c=i(r(4)),p=s(r(5));t.exports=Object.assign({Object:n,Array:o,A:o.of,Model:a,pluralize:p,ReactPropsMixin:h.PropsMixin,ReactStateMixin:h.StateMixin},u,c)},function(t,e,r){"use strict";var i,s=function(t){return t&&t.__esModule?t:{"default":t}},n=function(t){return t&&t.__esModule?t["default"]:t},o=n(r(2)),a=s(r(3)),h=function(){if("undefined"!=typeof window){i=document.createElement("iframe"),i.style.display="none",document.body.appendChild(i),frames[frames.length-1].document.write("<script>parent._Array = Array;</script>");var t=window._Array;return delete window._Array,document.body.removeChild(i),t}return r(!function(){var t=new Error('Cannot find module "vm"');throw t.code="MODULE_NOT_FOUND",t}()).runInNewContext("Array")}(),u=h.prototype,c=u.concat,p=u.slice,l=u.splice,f=u.map,d=u.filter;Object.assign(h,o),Object.assign(h.prototype,o.prototype),["findIndex","find"].forEach(function(t){h.prototype[t]=Array.prototype[t]}),h.of=function(){var t,e,r=new h(arguments.length);for(o.call(r),t=0,e=arguments.length;e>t;t++)r[t]=arguments[t];return r},h.from=function(t){return h.of.apply(null,t)},function(){this.displayName="Basis.Array",this.prop("size",{get:function(){return this.length}}),this.prop("first",{get:function(){return this[0]}}),this.prop("@",{get:function(){return this}}),this.prototype.at=function(t,e){var r=this.length;return 0>t&&(t=r+t),1===arguments.length?t>=0&&r>t?this[t]:void 0:(this.splice(t,1,e),e)},this.prototype.eq=function(t){return a.eq(this,t)},this.prototype._splice=function(t,e,r){var i=l.apply(this,[t,e].concat(r));return e!==r.length&&this.didChange("size"),0===t&&this.didChange("first"),this.didChange("@"),this.__proxy__&&(i.forEach(function(t){(t instanceof o||t instanceof h)&&t._deregisterProxy(this.__proxy__.to,this.__proxy__.name)},this),r.forEach(function(t){(t instanceof o||t instanceof h)&&t._registerProxy(this.__proxy__.to,this.__proxy__.name)},this),this.__proxy__.to.didChange(this.__proxy__.name)),h.from(i)},this.prototype.splice=function(t,e){var r=p.call(arguments,2),i=0>t?this.length+t:t;if(0>i)throw new Error("Basis.Array#splice: index "+t+" is too small for "+this);return void 0===e&&(e=this.length-i),this._splice(i,e,r)},this.prototype.push=function(){var t=p.call(arguments);return this.splice.apply(this,[this.length,0].concat(t)),this.length},this.prototype.unshift=function(){var t=p.call(arguments);return this.splice.apply(this,[0,0].concat(t)),this.length},this.prototype.pop=function(){return this.length>0?this.splice(-1,1).at(0):void 0},this.prototype.shift=function(){return this.length>0?this.splice(0,1).at(0):void 0},this.prototype.slice=function(){return h.from(p.apply(this,arguments))},this.prototype.map=function(){return h.from(f.apply(this,arguments))},this.prototype.filter=function(){return h.from(d.apply(this,arguments))},this.prototype.concat=function(){return h.from(c.apply(this,arguments))},this.prototype.replace=function(t){return this.splice.apply(this,[0,this.length].concat(t)),this},this.prototype.clear=function(){return this.splice(0,this.length),this},this.prototype.flatten=function(){for(var t=h.of(),e=0,r=this.length;r>e;e++){var i=this[e];i instanceof h?t=t.concat(i.flatten()):Array.isArray(i)?t=t.concat(h.from(i).flatten()):t.push(i)}return t},this.prototype.compact=function(){return this.reduce(function(t,e){return null!=e&&t.push(e),t},h.of())},this.prototype.uniq=function(){var t=new Map;return this.reduce(function(e,r){return t.has(r)||(t.set(r,!0),e.push(r)),e},h.of())},this.prototype.forEachCons=function(t,e){var r=[];this.forEach(function(i){r.push(i),r.length>t&&r.shift(),r.length===t&&e(r.slice(0))})},this.prototype.forEachSlice=function(t,e){var r=[];this.forEach(function(i){r.push(i),r.length===t&&(e(r),r=[])}),r.length>0&&e(r)},this.prototype.proxy=function(t,e){return this.__proxy__&&this.unproxy(),this.__proxy__={to:t,name:e},this.forEach(function(r){(r instanceof o||r instanceof h)&&r._registerProxy(t,e)}),this},this.prototype.unproxy=function(){return this.__proxy__&&(this.forEach(function(t){(t instanceof o||t instanceof h)&&t._deregisterProxy(this.__proxy__.to,this.__proxy__.name)},this),delete this.__proxy__),this},this.prototype.toString=function(){return"["+this.map(function(t){return String(t)}).join(", ")+"]"}}.call(h),t.exports=h},function(t){"use strict";function e(){Object.defineProperty(this,"objectId",{value:++c}),this.init.apply(this,arguments)}function r(t,e){if((t.__changedProps__=t.__changedProps__||{})[e]=!0,p[t.objectId]=t,n.call(t,e),t.__deps__){var i=t.__deps__[e];if(i)for(var s=0,o=i.length;o>s;s++)r(t,i[s])}if(t.__proxies__&&-1===e.indexOf("."))for(var a in t.__proxies__)r(t.__proxies__[a].object,""+t.__proxies__[a].name+"."+e)}function i(){for(var t,e=Object.keys(p),i=0,s=e.length;s>i;i++)for(var n=p[e[i]],o=Object.keys(n.__changedProps__),a=0,h=o.length;h>a;a++)r(n,o[a]);for(var c in p){var n=p[c],o=Object.keys(n.__changedProps__),f=!1;n.__changedProps__={};for(var a=0,h=o.length;h>a;a++)-1===o[a].indexOf(".")&&(f=!0),n._notify(o[a]);f&&n._notify("*")}for(p={},u=null;t=l.shift();)t()}function s(t,e){(this.__cache__=this.__cache__||{})[t]=e}function n(t){this.__cache__&&delete this.__cache__[t]}function o(t){return this.__cache__?this.__cache__.hasOwnProperty(t):!1}function a(t){return this.__cache__?this.__cache__[t]:void 0}function h(t,e){var r=void 0===arguments[2]?{}:arguments[2],i=Object.assign({name:e,get:null,set:null,"default":void 0,on:[],cache:!1},r,{readonly:r.get&&!r.set});t.hasOwnProperty("__props__")||(t.__props__=Object.create(t.__props__||null)),t.__props__[e]=i,t.hasOwnProperty("__deps__")||(t.__deps__=Object.create(t.__deps__||null)),i.on.forEach(function(r){if((t.__deps__[r]=t.__deps__[r]||[]).push(e),-1!==r.indexOf(".")){var i=r.split("."),s=i[0];if(i.length>2)throw new Error("Basis.Object.defineProp: dependent property paths of more than two segments are not allowed: `"+r+"`");(t.__deps__[s]=t.__deps__[s]||[]).push(e)}}),Object.defineProperty(t,e,{get:function(){return this._getProp(e)},set:i.readonly?void 0:function(t){this._setProp(e,t)},configurable:!1,enumerable:!0})}var u,c=0,p={},l=[];e.displayName="Basis.Object",e.flush=function(){return clearTimeout(u),i(),this},e.delay=function(t){return l.push(t),this},e.extend=function(t){var r=function(){e.apply(this,arguments)};for(var i in this)this.hasOwnProperty(i)&&(r[i]=this[i]);return r.prototype=Object.create(this.prototype),r.prototype.constructor=r,r.__super__=this.prototype,"function"==typeof t&&t.call(r),r},e.prop=function(t){var e=void 0===arguments[1]?{}:arguments[1];return h(this.prototype,t,e),this},e.props=function(t){for(var e in t)this.prop(e,t[e]);return this},e.toString=function(){return this.displayName||this.name||"(Unknown)"},e.prototype.init=function(t){t&&this.set(t)},e.prototype.prop=function(t){var e=void 0===arguments[1]?{}:arguments[1];return h(this,t,e),this},e.prototype.props=e.props,e.prototype.set=function(t){for(var e in t)this.__props__&&this.__props__[e]&&!this.__props__[e].readonly&&(this[e]=t[e])},e.prototype.on=function(t,e){return this.__observers__=this.__observers__||{},this.__observers__[t]=this.__observers__[t]||[],this.__observers__[t].push(e),this},e.prototype.off=function(t,e){if(this.__observers__&&this.__observers__[t])for(var r=this.__observers__[t].length-1;r>=0;r--)this.__observers__[t][r]===e&&this.__observers__[t].splice(r,1);return this},e.prototype.didChange=function(t){return(this.__changedProps__=this.__changedProps__||{})[t]=!0,p[this.objectId]=this,u||(u=setTimeout(i)),this},e.prototype.toString=function(){return"#<"+this.constructor+":"+this.objectId+">"},e.prototype.eq=function(t){return this===t},e.prototype._getProp=function(t){var e,r=this.__props__&&this.__props__[t],i="__"+t;if(!r)throw new Error("Basis.Object#_getProp: unknown prop name `"+t+"`");return r.cache&&o.call(this,t)?a.call(this,t):(e=r.get?r.get.call(this):this[i],e=void 0===e?r["default"]:e,r.cache&&s.call(this,t,e),e)},e.prototype._setProp=function(t,e){var r=this.__props__&&this.__props__[t],i="__"+t,s=this._getProp(t);if(!r)throw new Error("Basis.Object#_setProp: unknown prop name `"+t+"`");if(r.readonly)throw new TypeError("Basis.Object#_setProp: cannot set readonly property `"+t+"` of "+this);return r.set?r.set.call(this,e):this[i]=e,this.didChange(t),s},e.prototype._notify=function(t){if(this.__observers__&&this.__observers__[t])for(var e=0,r=this.__observers__[t].length;r>e;e++)this.__observers__[t][e]&&this.__observers__[t][e](t);return this},e.prototype._registerProxy=function(t,e){return this.__proxies__=this.__proxies__||{},this.__proxies__[""+t.objectId+","+e]={object:t,name:e},this},e.prototype._deregisterProxy=function(t,e){return this.__proxies__&&delete this.__proxies__[""+t.objectId+","+e],this},e.displayName="Basis.Object",t.exports=e},function(t,e,r){"use strict";function i(t,e){var r,i;for(r=0,i=_.length;i>r;r++)if(_[r][0]===t&&_[r][1]===e)return!0;return!1}function s(t,e){_.push([t,e])}function n(t,e){var r,i;for(r=0,i=_.length;i>r;r++)if(_[r][0]===t&&_[r][1]===e)return void _.splice(r,1)}function o(t,e,r){if(2===arguments.length&&(r=e,e=void 0),i(t,e))return!0;s(t,e);try{r()}finally{n(t,e)}return!1}function a(t){if(null===t)return"null";if(void 0===t)return"undefined";switch(d.call(t)){case"[object Array]":return"array";case"[object Arguments]":return"arguments";case"[object Function]":return"function";case"[object String]":return"string";case"[object Number]":return"number";case"[object Boolean]":return"boolean";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Object]":return t.hasOwnProperty("callee")?"arguments":"object"}return"unknown"}function h(t,e){var r,i,s,n,u;if(t===e)return!0;if(t instanceof f)return t.eq(e);if(r=a(t),i=a(e),r!==i)return!1;switch(r){case"boolean":case"string":case"date":case"number":return t.valueOf()===e.valueOf();case"regexp":return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.ignoreCase===e.ignoreCase;case"array":return t.length!==e.length?!1:(u=!0,o(t,e,function(){var r,i;for(r=0,i=t.length;i>r;r++)if(!h(t[r],e[r])){u=!1;break}}),u);case"object":return s=Object.keys(t),n=Object.keys(e),s.length!==n.length?!1:(u=!0,o(t,e,function(){var r,i,n;for(r=0,i=s.length;i>r;r++){if(n=s[r],!e.hasOwnProperty(n)){u=!1;break}if(!h(t[n],e[n])){u=!1;break}}}),u);default:return!1}}function u(t){return"string"==typeof t?t.replace(/(?:[-_])(\w)/g,function(t,e){return e?e.toUpperCase():""}):t}function c(t){return"string"==typeof t?t.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase():t}function p(t){return"string"==typeof t&&t.length?t[0].toUpperCase()+t.slice(1):t}var l=function(t){return t&&t.__esModule?t["default"]:t};e.detectRecursion=o,e.type=a,e.eq=h,e.camelize=u,e.underscore=c,e.capitalize=p;var f=l(r(2)),d=Object.prototype.toString,_=[];Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";function r(t){return t=String(t).replace(/[^\d-.]/g,"").replace(/\.$/,""),t.match(u)?parseFloat(t,10):null}function i(t){var e=r(String(t).replace("%",""));return null==e?null:e/100}function s(t){var e,r,i,s,n;return t=String(t).replace(/\s/g,""),(n=t.match(p))?(i=parseInt(n[1],10),e=parseInt(n[2],10)-1,r=parseInt(n[3],10),s=new Date(i,e,r),s.getMonth()===e?s:null):(n=t.match(c))?(e=parseInt(n[1],10)-1,r=parseInt(n[2],10),i=n[3]?parseInt(n[3],10):(new Date).getFullYear(),i>=0&&68>=i&&(i+=2e3),i>=69&&99>=i&&(i+=1900),s=new Date(i,e,r),s.getMonth()===e?s:null):null}function n(t){var e;return t=String(t),t.match(l)&&(t+="Z"),(e=Date.parse(t))?new Date(e):null}function o(t){return t=String(t),f.test(t)?t:null}function a(t){return t=String(t),d.test(t.replace(_,""))?t:null}function h(t){if(t=String(t),!y.test(t))return null;var e=t.split(":").map(function(t){return+t});return 3===e.length?3600*e[0]+60*e[1]+e[2]:2===e.length?60*e[0]+e[1]:e[0]}e.parseNumber=r,e.parsePercent=i,e.parseDate=s,e.parseDateTime=n,e.parseEmail=o,e.parsePhone=a,e.parseDuration=h;var u=/^[-]?([0-9]*[0-9][0-9]*(\.[0-9]+)?|[0]*\.[0-9]*[0-9][0-9]*)$/,c=/^\s*(\d{1,2})[\/-](\d{1,2})(?:[\/-](\d{2,4}))?\s*$/,p=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,l=/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.\d+)?$/,f=/^([^@\s]+)@([-a-z0-9]+\.+[a-z]{2,})$/i,d=/^\d{10}$/,_=/[\(\)\s-]/g,y=/^\s*(?:(?::?\d+)|(?::?\d+:\d+)|(?:\d+:\d+:\d+))\s*$/;Object.defineProperty(e,"__esModule",{value:!0})},function(t){!function(e,r){t.exports=r()}(this,function(){function t(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}function e(t){return"string"==typeof t?new RegExp("^"+t+"$","i"):t}function r(e,r){return e===e.toUpperCase()?r.toUpperCase():e[0]===e[0].toUpperCase()?t(r):r.toLowerCase()}function i(t,e){return t.replace(/\$(\d{1,2})/g,function(t,r){return e[r]||""})}function s(t,e){if(!t.length||u.hasOwnProperty(t))return t;for(var s=e.length;s--;){var n=e[s];if(n[0].test(t))return t.replace(n[0],function(t,e,s){var o=i(n[1],arguments);return""===t?r(s[e-1],o):r(t,o)})}return t}function n(t,e,i){return function(n){var o=n.toLowerCase();return e.hasOwnProperty(o)?r(n,o):t.hasOwnProperty(o)?r(n,t[o]):s(n,i)}}function o(t,e,r){var i=1===e?o.singular(t):o.plural(t);return(r?e+" ":"")+i}var a=[],h=[],u={},c={},p={};return o.plural=n(p,c,a),o.singular=n(c,p,h),o.addPluralRule=function(t,r){a.push([e(t),r])},o.addSingularRule=function(t,r){h.push([e(t),r])},o.addUncountableRule=function(t){return"string"==typeof t?u[t.toLowerCase()]=!0:(o.addPluralRule(t,"$0"),void o.addSingularRule(t,"$0"))},o.addIrregularRule=function(t,e){e=e.toLowerCase(),t=t.toLowerCase(),p[t]=e,c[e]=t},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["thief","thieves"],["genie","genies"],["groove","grooves"],["pickaxe","pickaxes"],["whiskey","whiskies"]].forEach(function(t){return o.addIrregularRule(t[0],t[1])}),[[/s?$/i,"s"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|tlas|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|\w+hedr)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(i)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/(m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"]].forEach(function(t){return o.addPluralRule(t[0],t[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(?:sis|ses)$/i,"$1sis"],[/(^analy)(?:sis|ses)$/i,"$1sis"],[/([^aeflor])ves$/i,"$1fe"],[/(hive|tive|dr?ive)s$/i,"$1"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(^[pl]|zomb|^(?:neck)?t|[aeo][lt]|cut)ies$/i,"$1ie"],[/([^c][eor]n|smil)ies$/i,"$1ey"],[/(m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|(?:her|at|gr)o|ris)(?:es)?$/i,"$1"],[/(e[mn]u)s?$/i,"$1"],[/(movie|twelve)s$/i,"$1"],[/(cris|test|diagnos)(?:is|es)$/i,"$1is"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|\w+hedr)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(t){return o.addSingularRule(t[0],t[1])}),["advice","agenda","bison","bream","buffalo","carp","chassis","cod","cooperation","corps","digestion","debris","diabetes","energy","equipment","elk","excretion","expertise","flounder","gallows","graffiti","headquarters","health","herpes","highjinks","homework","information","jeans","justice","kudos","labour","machinery","mackerel","media","mews","moose","news","pike","plankton","pliers","pollution","premises","rain","rice","salmon","scissors","series","sewage","shambles","shrimp","species","staff","swine","trout","tuna","whiting","wildebeest","wildlife",/pox$/i,/ois$/i,/deer$/i,/fish$/i,/sheep$/i,/measles$/i,/[^aeiou]ese$/i].forEach(o.addUncountableRule),o})},function(t,e,r){"use strict";{var i=function(t){return t&&t.__esModule?t:{"default":t}},s=function(t,e,r){e&&Object.defineProperties(t,e),r&&Object.defineProperties(t.prototype,r)},n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(r(4));e.IdentityAttr={coerce:function(t){return t},serialize:function(t){return t}},e.StringAttr=function(){function t(){var e=void 0===arguments[0]?{}:arguments[0];n(this,t),this.opts=Object.assign({trim:!0},e)}return s(t,null,{coerce:{value:function(t){return t=null!=t?String(t):t,"string"==typeof t&&this.opts.trim&&(t=t.trim()),t},writable:!0,configurable:!0},serialize:{value:function(t){return t},writable:!0,configurable:!0}}),t}(),e.NumberAttr={coerce:function(t){return"number"==typeof t?t:"string"==typeof t?o.parseNumber(t):void 0===t?void 0:null},serialize:function(t){return t}},e.BooleanAttr={coerce:function(t){return void 0===t?t:!!t},serialize:function(t){return t}},e.DateAttr={coerce:function(t){if(null==t||t instanceof Date)return t;if("number"==typeof t)return new Date(t);if("string"!=typeof t)throw new Error("Basis.DateAttr#coerce: don't know how to coerce `"+t+"` to a Date");return o.parseDate(t)},serialize:function(t){return t instanceof Date?t.toJSON().replace(/T.*$/,""):t}},e.DateTimeAttr={coerce:function(t){if(null==t||t instanceof Date)return t;if("number"==typeof t)return new Date(t);if("string"!=typeof t)throw new Error("Basis.DateTimeAttr#coerce: don't know how to coerce `"+t+"` to a Date");return o.parseDateTime(t)},serialize:function(t){return t instanceof Date?t.toJSON():t}}}Object.defineProperty(e,"__esModule",{value:!0})},function(t){"use strict";var e={models:new Map,insert:function(t){var e,r=t.constructor,i=t.id;if((e=this.models.get(r))||this.models.set(r,e=new Map),e.get(i))throw new Error("IdMap.insert: model of type `"+r+"` and id `"+i+"` has already been inserted");return e.set(i,t),this},get:function(t,e){var r=this.models.get(t);return r&&r.get(e)},"delete":function(t){var e=this.models.get(t.constructor);return e?(e["delete"](t.id),this):this},clear:function(){return this.models.clear(),this}};t.exports=e},function(t,e,r){"use strict";function i(t){var e=void 0===arguments[1]?!0:arguments[1],r="function"==typeof t?t:E[t];if(!r&&e)throw new Error("Basis.Model.resolve: could not resolve subclass: `"+t+"`");return r}function s(t,e){var r=i(t.klass);if(e&&!(e instanceof r))throw new Error(""+t.debugName+": expected an object of type `"+t.klass+"` but received `"+e+"` instead")}function n(t){var e,r;if(t.owner&&t.inverse&&(e=i(t.klass,!1))&&e.prototype.associations&&(r=e.prototype.associations[t.inverse])&&r.owner)throw new Error(""+this+"."+t.name+": both sides of the association are marked as owner")}function o(t,e,r){var i,n,t,o=this.__owner__,a=this.__desc__,h=a.inverse,u=a.name;return r.forEach(function(t){return s(a,t)}),i=g.prototype._splice.call(this,t,e,r),h&&!this.__handlingInverse__&&(i.forEach(function(t){t._inverseRemoved(h,o)},this),r.forEach(function(t){t._inverseAdded(h,o)},this)),a.owner&&(n=o.changes[u]=o.changes[u]||{added:[],removed:[]},i.forEach(function(e){-1!==(t=n.added.indexOf(e))?n.added.splice(t,1):-1===n.removed.indexOf(e)&&n.removed.push(e)}),r.forEach(function(e){-1!==(t=n.removed.indexOf(e))?n.removed.splice(t,1):-1===n.added.indexOf(e)&&n.added.push(e)}),n.added.length||n.removed.length?o._setChange(u,n):o._clearChange(u)),i}function a(t){this.__handlingInverse__=!0,this.push(t),this.__handlingInverse__=!1}function h(t){var e=this.indexOf(t);e>=0&&(this.__handlingInverse__=!0,this.splice(e,1),this.__handlingInverse__=!1)}function u(t,e){var r=g.of();return r.proxy(t,e.name),r.__owner__=t,r.__desc__=e,r._splice=o,r._inverseAdd=a,r._inverseRemove=h,r}function c(t,e,r){var i=t.name,n="__"+i,o=this[n],a=t.inverse;s(t,e),this[n]=e,r&&a&&o&&o._inverseRemoved(a,this),r&&a&&e&&e._inverseAdded(a,this),o&&o._deregisterProxy(this,i),e&&e._registerProxy(this,i)}function p(){var t=this;_["delete"](this),this.isBusy=!1,this.sourceState=j,this._clearErrors();for(var e in this.associations){{(function(e){var r=t.associations[e];if(!r.inverse)return"continue";if("hasOne"===r.type){var i=void 0;(i=t[e])&&i._inverseRemoved(r.inverse,t)}else"hasMany"===r.type&&t[e].slice(0).forEach(function(e){e._inverseRemoved(r.inverse,t)})})(e)}}}var l=function(t){return t&&t.__esModule?t:{"default":t}},f=function(t){return t&&t.__esModule?t["default"]:t},d=f(r(5)),_=f(r(7)),y=f(r(2)),g=f(r(1)),v=f(r(10)),m=l(r(6)),b=l(r(3)),w={},E={},$="new",x="empty",O="loaded",j="deleted",P=y.extend(function(){this.displayName="Basis.Model",this.extend=function(t,e){if("string"!=typeof t)throw new Error(""+this+".extend: a name is required");var r=y.extend.call(this);return r.displayName=t,E[t]=r,"function"==typeof e&&e.call(r),r},this.empty=function(t){var e=new this({id:t});return e.sourceState=x,e},this.registerAttr=function(t,e){if(w[t])throw new Error(""+this+".registerAttr: an attribute with the name `"+t+"` has already been defined");return w[t]=e,this},this.registerAttr("identity",m.IdentityAttr),this.registerAttr("string",m.StringAttr),this.registerAttr("number",m.NumberAttr),this.registerAttr("boolean",m.BooleanAttr),this.registerAttr("date",m.DateAttr),this.registerAttr("datetime",m.DateTimeAttr),this.attr=function(t,e){var r=void 0===arguments[2]?{}:arguments[2],i=w[e];if(!i)throw new Error(""+this+".attr: unknown attribute type: `"+e+"`");return"function"==typeof i&&(i=new i(r)),this.prop(t,{attr:!0,converter:i,get:function(){return this["__"+t]},set:function(e){this["__"+t]=i.coerce(e),this[""+t+"BeforeCoercion"]=e},"default":"default"in r?r["default"]:void 0}),this},this.hasOne=function(t,e){var r,i=void 0===arguments[2]?{}:arguments[2];return this.prototype.hasOwnProperty("associations")||(this.prototype.associations=Object.create(this.prototype.associations)),this.prototype.associations[t]=r=Object.assign({},i,{type:"hasOne",name:t,klass:e,debugName:""+this.toString()+"#"+t}),n.call(this,r),r.owner&&(this.prototype.hasOwnProperty("__deps__")||(this.prototype.__deps__=Object.create(this.prototype.__deps__)),(this.prototype.__deps__[""+t+".hasErrors"]=this.prototype.__deps__[""+t+".hasErrors"]||[]).push("hasErrors"),(this.prototype.__deps__[""+t+".hasChanges"]=this.prototype.__deps__[""+t+".hasChanges"]||[]).push("hasChanges")),this.prop(t,{get:function(){return this["__"+t]},set:function(t){c.call(this,r,t,!0)}}),this},this.hasMany=function(t,e){var r,s=void 0===arguments[2]?{}:arguments[2],o="__"+t;this.prototype.hasOwnProperty("associations")||(this.prototype.associations=Object.create(this.prototype.associations)),this.prototype.associations[t]=r=Object.assign({},s,{type:"hasMany",name:t,klass:e,singular:d(t,1),debugName:""+this.toString()+"#"+t}),n.call(this,r),r.owner&&(this.prototype.hasOwnProperty("__deps__")||(this.prototype.__deps__=Object.create(this.prototype.__deps__)),(this.prototype.__deps__[""+t+".hasErrors"]=this.prototype.__deps__[""+t+".hasErrors"]||[]).push("hasErrors"),(this.prototype.__deps__[""+t+".hasChanges"]=this.prototype.__deps__[""+t+".hasChanges"]||[]).push("hasChanges")),this.prop(t,{get:function(){return this[o]?this[o]:(r.klass=i(r.klass),this[o]=u(this,r))},set:function(t){this[o].replace(t)}})},this.validate=function(t,e){return this.prototype.hasOwnProperty("validators")||(this.prototype.validators=Object.create(this.prototype.validators)),(this.prototype.validators[t]=this.prototype.validators[t]||[]).push(e),this},this.load=function(t){var e,r=t.id,s=this.prototype.associations,n={};if(!r)throw new Error(""+this+".load: an `id` attribute is required");t=Object.assign({},t),e=_.get(this,r)||new this,delete t.id;for(var o in s){var a=s[o];o in t?(n[o]=t[o],delete t[o]):"hasOne"===a.type&&""+o+"Id"in t?(n[o]=t[""+o+"Id"],delete t[""+o+"Id"]):"hasOne"===a.type&&""+o+"_id"in t?(n[o]=t[""+o+"_id"],delete t[""+o+"_id"]):"hasMany"===a.type&&""+a.singular+"Ids"in t?(n[o]=t[""+a.singular+"Ids"],delete t[""+a.singular+"Ids"]):"hasMany"===a.type&&""+a.singular+"_ids"in t&&(n[o]=t[""+a.singular+"_ids"],delete t[""+a.singular+"_ids"])}e.set(t),void 0===e.id&&(e.id=r);for(var h in n){{(function(t){var r=i(s[t].klass),o=n[t];if(!o)return"continue";if("hasOne"===s[t].type){var a="object"==typeof o?r.load(o):r.local(o);e[t]=a}else"hasMany"===s[t].type&&!function(){var i=[];o.forEach(function(t){i.push("object"==typeof t?r.load(t):r.local(t))}),e[t]=i}()})(h)}}return e.sourceState=O,e._clearChanges(),e._clearErrors(),e},this.loadAll=function(t){var e=this;return t.map(function(t){return e.load(t)})},this.buildQuery=function(){var t,e=this,r=Promise.resolve(),i=g.of();return i.props({modelClass:{get:function(){return e}},isBusy:{"default":!1},error:{},meta:{}}),i.query=function(){var i=this,s=void 0===arguments[0]?{}:arguments[0];return this.isBusy?(t||(r=r.then(function(){return i.query(t),t=void 0,r})),t=s):(this.isBusy=!0,r=e._callMapper("query",[s]).then(function(t){try{Array.isArray(t)?i.replace(e.loadAll(t)):t.results&&(i.replace(e.loadAll(t.results)),i.meta=t.meta)}catch(r){throw console.error(r),r}i.isBusy=!1,i.error=void 0},function(t){return i.isBusy=!1,i.error=t,Promise.reject(t)})),this},i.then=function(t,e){return r.then(t,e)},i["catch"]=function(t){return r["catch"](t)},i},this.query=function(){var t=void 0===arguments[0]?{}:arguments[0];return this.buildQuery().query(t)},this.local=function(t){return _.get(this,t)||this.empty(t)},this.get=function(t){var e=this,r=void 0===arguments[1]?{}:arguments[1],i=this.local(t),s=Object.assign({},r);return delete s.refresh,(i.isEmpty||r.refresh)&&(i.isBusy=!0,i.__promise__=this._callMapper("get",[t,s]).then(function(t){i.isBusy=!1;try{e.load(t)}catch(r){throw console.error(r),r}},function(t){return i.isBusy=!1,i._loadErrors(t),Promise.reject(t)})),i},this.clearIdMap=function(){return _.clear(),this},this._callMapper=function(t,e){var r;if(!this.mapper)throw new Error(""+this+"._callMapper: no mapper defined, assign one to `"+this+".mapper`");if("function"!=typeof this.mapper[t])throw new Error(""+this+"._callMapper: mapper does not implement `"+t+"`");if(r=this.mapper[t].apply(this.mapper,e),!r||"function"!=typeof r.then)throw new Error(""+this+"._callMapper: mapper's `"+t+"` method did not return a Promise");return r},this.prototype.associations={},this.prototype.validators={},this.prototype.init=function(t){this.sourceState=$,this.isBusy=!1,this.__promise__=Promise.resolve(),this._clearChanges(),P.__super__.init.call(this,t)},this.prop("id",{get:function(){return this.__id},set:function(t){if(this.__id)throw new Error(""+this.constructor+"#id=: overwriting a model's identity is not allowed: "+this);this.__id=t,_.insert(this)}}),this.prop("sourceState"),this.prop("isNew",{on:["sourceState"],get:function(){return this.sourceState===$}}),this.prop("isEmpty",{on:["sourceState"],get:function(){return this.sourceState===x}}),this.prop("isLoaded",{on:["sourceState"],get:function(){return this.sourceState===O}}),this.prop("isDeleted",{on:["sourceState"],get:function(){return this.sourceState===j}}),this.prop("isBusy"),this.prop("changes",{get:function(){return this.__changes=this.__changes||{}}}),this.prop("hasOwnChanges",{on:["changes"],get:function(){return Object.keys(this.changes).length>0}}),this.prop("hasChanges",{on:["changes"],get:function(){if(this.hasOwnChanges)return!0;for(var t in this.associations)if(this.associations[t].owner)if("hasOne"===this.associations[t].type){if(this[t]&&this[t].hasChanges)return!0}else if("hasMany"===this.associations[t].type&&this[t].some(function(t){return t.hasChanges}))return!0;return!1}}),this.prop("errors",{get:function(){return this.__errors=this.__errors||{}}}),this.prop("hasOwnErrors",{on:["errors","_destroy"],get:function(){return!this._destroy&&Object.keys(this.errors).length>0}}),this.prop("hasErrors",{on:["hasOwnErrors"],get:function(){if(this.hasOwnErrors)return!0;for(var t in this.associations)if(this.associations[t].owner)if("hasOne"===this.associations[t].type){if(this[t]&&this[t].hasErrors)return!0}else if("hasMany"===this.associations[t].type&&this[t].some(function(t){return t.hasErrors}))return!0;return!1}}),this.attr("_destroy","boolean"),this.prototype.attrs=function(){var t={};for(var e in this.__props__)this.__props__[e].attr&&(t[e]=this.__props__[e].converter.serialize(this[e]));return"undefined"!=typeof this.id&&(t.id=this.id),void 0===t._destroy&&delete t._destroy,t},this.prototype.get=function(){var t=void 0===arguments[0]?{}:arguments[0];if(!this.isLoaded&&!this.isEmpty||this.isBusy)throw new Error(""+this.constructor+"#get: can't get a model in the "+this.stateString()+" state: "+this);return this.constructor.get(this.id,Object.assign({},t,{refresh:!0}))},this.prototype.save=function(){var t=this,e=void 0===arguments[0]?{}:arguments[0];if(!this.isNew&&!this.isLoaded||this.isBusy)throw new Error(""+this.constructor+"#save: can't save a model in the "+this.stateString()+" state: "+this);return this.isBusy=!0,this.__promise__=this.constructor._callMapper(this.isNew?"create":"update",[this,e]).then(function(e){t.isBusy=!1;try{t.load(e)}catch(r){throw console.error(r),r}},function(e){return t.isBusy=!1,t._loadErrors(e),Promise.reject(e)}),this},this.prototype["delete"]=function(){var t=this,e=void 0===arguments[0]?{}:arguments[0];if(this.isDeleted)return this;if(this.isBusy)throw new Error(""+this.constructor+"#delete: can't delete a model in the "+this.stateString()+" state: "+this);return this.isNew?p.call(this):(this.isBusy=!0,this.__promise__=this.constructor._callMapper("delete",[this,e]).then(function(){p.call(t)},function(e){return t.isBusy=!1,t._loadErrors(e),Promise.reject(e)})),this},this.prototype.then=function(t,e){return this.__promise__.then(t,e)},this.prototype["catch"]=function(t){return this.__promise__["catch"](t)},this.prototype.load=function(t){var e=t.id;if(null==e&&null==this.id)throw new Error(""+this.constructor+"#load: an `id` attribute is required");if(null!=e&&null!=this.id&&e!==this.id)throw new Error(""+this.constructor+"#load: received attributes with id `"+e+"` but model already has id `"+this.id+"`");return null==this.id&&(this.id=e),t.id=this.id,this.constructor.load(t),this},this.prototype.stateString=function(){var t=[this.sourceState.toUpperCase()];
return this.isBusy&&t.push("BUSY"),t.join("-")},this.prototype.undoChanges=function(){var t=this,e=this.associations;for(var r in this.changes)!function(r){if(e[r]&&"hasMany"===e[r].type){var i=t.changes[r].removed.slice(),s=t.changes[r].added.slice();i.reverse().forEach(function(e){t[r].push(e)}),s.forEach(function(e){t[r].splice(t[r].indexOf(e),1)})}else t[r]=t.changes[r]}(r);for(var i in e){var s=e[i];s.owner&&("hasOne"===s.type?this[i]&&this[i].undoChanges():"hasMany"===s.type&&this[i].forEach(function(t){return t.undoChanges()}))}this.validate()},this.prototype.addError=function(t,e){return this.errors[t]=this.errors[t]||[],-1===this.errors[t].indexOf(e)&&(this.errors[t].push(e),this.didChange("errors")),this},this.prototype.validateAttr=function(t){if(this._clearErrors(t),!this.validators[t])return!0;for(var e=0,r=this.validators[t].length;r>e;e++){var i=this.validators[t][e];if("function"==typeof i)i.call(this);else{if(!("string"==typeof i&&i in this))throw new Error(""+this.constructor+"#validateAttr: don't know how to execute validator: `"+i+"`");this[i]()}}return!(t in this.errors)},this.prototype.validate=function(){var t=this.associations;this._clearErrors();for(var e in this.validators)this.validateAttr(e);for(var r in t){var i=t[r];i.owner&&("hasOne"===i.type?this[r]&&!this[r]._destroy&&this[r].validate():"hasMany"===i.type&&this[r].forEach(function(t){return!t._destroy&&t.validate()}))}return!this.hasErrors},this.prototype.toString=function(){var t=this.attrs();for(var e in this.associations)if("hasOne"===this.associations[e].type)this[e]&&this[e].id&&(t[e]=this[e].id);else if("hasMany"===this.associations[e].type){var r=this[e].map(function(t){return t.id}).compact();r.length&&(t[e]=r)}return"#<"+this.constructor+" ("+this.stateString()+"):"+this.objectId+" "+JSON.stringify(t)+">"},this.prototype._loadErrors=function(t){var e=this;if("object"==typeof t)for(var r in t)!function(r){Array.isArray(t[r])?t[r].forEach(function(t){this.addError(r,t)},e):e.addError(r,String(t[r]))}(r);else this.addError("base",String(t));return this},this.prototype._clearErrors=function(t){return t?delete this.errors[t]:this.__errors={},this.didChange("errors"),this},this.prototype._inverseRemoved=function(t,e){var r=this.associations[t];if(!r)throw new Error(""+this.constructor+"#inverseRemoved: unknown association `"+t+"`");"hasOne"===r.type?c.call(this,r,void 0,!1):"hasMany"===r.type&&this[r.name]._inverseRemove(e)},this.prototype._inverseAdded=function(t,e){var r=this.associations[t];if(!r)throw new Error(""+this.constructor+"#inverseAdded: unknown association `"+t+"`");"hasOne"===r.type?c.call(this,r,e,!1):"hasMany"===r.type&&this[r.name]._inverseAdd(e)},this.prototype._setProp=function(t,e){var r=P.__super__._setProp.call(this,t,e);(this.__props__[t].attr||this.associations[t])&&(!this.associations[t]||this.associations[t].owner)&&(t in this.changes?b.eq(this[t],this.changes[t])&&this._clearChange(t):b.eq(this[t],r)||this._setChange(t,r))},this.prototype._setChange=function(t,e){this.changes[t]=e,this.didChange("changes")},this.prototype._clearChange=function(t){delete this.changes[t],this.didChange("changes")},this.prototype._clearChanges=function(){this.__changes={},this.didChange("changes")}});P.NEW=$,P.EMPTY=x,P.LOADED=O,P.DELETED=j,Object.assign(P,v["static"]),Object.assign(P.prototype,v.instance),t.exports=P},function(t,e,r){"use strict";{var i=function(t){return t&&t.__esModule?t["default"]:t},s=i(r(1));e.PropsMixin=function(t){return{componentWillMount:function(){var e=this;this._basisFU=this._basisFU||function(){e.isMounted()&&e.forceUpdate()};for(var r in t)!function(r){t[r].forEach(function(t){this.props[r]&&this.props[r].on(t,this._basisFU)},e)}(r)},componentWillUnmount:function(){var e=this;for(var r in t)!function(r){t[r].forEach(function(t){this.props[r]&&this.props[r].off(t,this._basisFU)},e)}(r)},componentWillReceiveProps:function(e){var r=this;for(var i in t)!function(i){t[i].forEach(function(t){e[i]!==this.props[i]&&(this.props[i]&&this.props[i].off(t,this._basisFU),e[i]&&e[i].on(t,this._basisFU))},r)}(i)}}},e.StateMixin=function(t,e){return"object"!=typeof e&&(e=s.from(arguments).slice(1).reduce(function(t,e){return t[e]=[],t},{})),{getInitialState:function(){var r={};for(var i in e)r[i]=t[i];return r},componentWillMount:function(){var r=this;this._basisFU=this._basisFU||function(){r.isMounted()&&r.forceUpdate()},this._basisSyncState=function(){var i={};for(var s in e)!function(s){r.state[s]!==t[s]&&(r.state[s]&&"function"==typeof r.state[s].off&&e[s].forEach(function(t){r.state[s].off(t,r._basisFU)}),t[s]&&"function"==typeof t[s].on&&e[s].forEach(function(e){t[s].on(e,r._basisFU)}),i[s]=t[s])}(s);Object.keys(i).length&&r.setState(i)};for(var i in e)!function(i){t[i]&&"function"==typeof t[i].on&&e[i].forEach(function(e){t[i].on(e,r._basisFU)})}(i);t.on("*",this._basisSyncState)},componentWillUnmount:function(){var r=this;for(var i in e)!function(t){r.state[t]&&"function"==typeof r.state[t].off&&e[t].forEach(function(e){r.state[t].off(e,r._basisFU)})}(i);t.off("*",this._basisSyncState)}}}}Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,r){"use strict";function i(t){return null==t||"string"===a.type(t)&&t.match(/^\s*$/)||"array"===a.type(t)&&0===t.length||t instanceof o&&0===t.length}var s=function(t){return t&&t.__esModule?t:{"default":t}},n=function(t){return t&&t.__esModule?t["default"]:t},o=n(r(1)),a=s(r(3)),h=s(r(4)),u={"static":{validatesPresence:function(){var t=Array.from(arguments),e="object"===a.type(t[t.length-1])?t.pop():{};return t.forEach(function(t){this.validate(t,function(){this.validatePresence(t,e)})},this),this},validatesNumber:function(){var t=Array.from(arguments),e="object"===a.type(t[t.length-1])?t.pop():{};return t.forEach(function(t){this.validate(t,function(){this.validateNumber(t,e)})},this),this},validatesDate:function(){Array.from(arguments).forEach(function(t){this.validate(t,function(){this.validateDate(t)})},this)},validatesEmail:function(){return Array.from(arguments).forEach(function(t){this.validate(t,function(){this.validateEmail(t)})},this),this},validatesPhone:function(){return Array.from(arguments).forEach(function(t){this.validate(t,function(){this.validatePhone(t)})},this),this},validatesDuration:function(){return Array.from(arguments).forEach(function(t){this.validate(t,function(){this.validateDuration(t)})},this),this}},instance:{validatePresence:function(t){var e=void 0===arguments[1]?{}:arguments[1];if(!e["if"]||e["if"].call(this)){var r=null!=this[""+t+"BeforeCoercion"]?this[""+t+"BeforeCoercion"]:this[t];i(r)&&this.addError(t,"must be present")}},validateNumber:function(t){var e=void 0===arguments[1]?{}:arguments[1];"number"===a.type(this[t])?e.nonnegative&&this[t]<0&&this.addError(t,"must not be negative"):i(this[""+t+"BeforeCoercion"])||this.addError(t,"is not a number")},validateDate:function(t){var e=this[""+t+"BeforeCoercion"];i(e)||e instanceof Date||h.parseDate(e)||this.addError(t,"is not a date")},validateEmail:function(t){var e=this[""+t+"BeforeCoercion"];i(e)||h.parseEmail(e)||this.addError(t,"is not an email")},validatePhone:function(t){var e=this[""+t+"BeforeCoercion"];i(e)||h.parsePhone(e)||this.addError(t,"is not a phone number")},validateDuration:function(t){var e=this[""+t+"BeforeCoercion"];i(e)||h.parseDuration(e)||this.addError(t,"is not a duration")}}};t.exports=u}]);