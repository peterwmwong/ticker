<link rel='import' href='ticker-repo-name.html'>

<dom-module id='ticker-event-templates'>

  <template is='x-template' id='IssuesEvent,PullRequestEvent'>
    <div class='Card-action ticker-event__summary'>
      <ticker-avatar
        source='[[event.actor]]'
        class='ticker-event__summary-actor-avatar'></ticker-avatar>
      <span class='ticker-event__summary-actor'
        >[[event.actor.login]]</span>
      <span class='ticker-event__summary-action'
        >[[event.payload.action]]</span>
      <span class='ticker-event__summary-subject'>
        <iron-icon
          class='ticker-event__summary-subject__icon'
          icon='[[iconForIssueOrPR(event)]]'>
        </iron-icon><span>[[titleForIssueOrPR(event)]]</span>
      </span>
    </div>
  </template>

  <template is='x-template' id='ReleaseEvent'>
    <div class='Card-action'>
      <ticker-avatar source='[[event.actor]]' class='l-margin-r3'></ticker-avatar>
      <span class='t-normal'>[[event.actor.login]]</span>&nbsp;published a release&nbsp;
      <iron-icon class='c-warning' icon='github:versions'></iron-icon>
      &nbsp;<span class='t-normal'>[[displayNameForRelease(event.payload.release)]]</span>
    </div>
  </template>

  <template is='x-template' id='TeamAddEvent'>
    <div class='Card-action'>
      <span>[[event.payload.team.name]]</span>
      &nbsp;team was added
    </div>
  </template>

  <template is='x-template' id='CreateEvent,DeleteEvent'>
    <div class='Card-action ticker-event__summary'>
      <ticker-avatar
        source='[[event.actor]]'
        class='ticker-event__summary-actor-avatar'></ticker-avatar>
      <span class='ticker-event__summary-actor'
        >[[event.actor.login]]</span>
      <span class='ticker-event__summary-action'>
        <span>[[createDeleteAction(event)]]</span>
        a
        <span>[[event.payload.ref_type]]</span>
      </span>
      <span class='ticker-event__summary-subject'>
        <iron-icon
          class='ticker-event__summary-subject__icon'
          icon='[[iconForBranchOrRepo(event)]]'>
        </iron-icon><span>[[createDeleteSubject(event)]]</span>
      </span>
    </div>
  </template>

  <template is='x-template' id='IssueCommentEvent,PullRequestReviewCommentEvent'>
    <div class='Card-action ticker-event__summary'>
      <ticker-avatar
        source='[[event.actor]]'
        class='ticker-event__summary-actor-avatar'></ticker-avatar>
      <span class='ticker-event__summary-actor'
        >[[event.actor.login]]</span>
      <span class='ticker-event__summary-action'
        >commented on</span>
      <span class='ticker-event__summary-subject'>
        <iron-icon
          class='ticker-event__summary-subject__icon'
          icon='[[iconForIssueOrPR(event)]]'>
        </iron-icon><span>[[titleForIssueOrPR(event)]]</span>
      </span>
    </div>
    <div class='Card-action Card-action--secondary'>
      <iron-icon icon='github:quote' class='c-gray-light self-start'></iron-icon>
      <span class='flex l-padding-l1'>[[event.payload.comment.body]]</span>
    </div>
  </template>

  <template is='x-template' id='CommitCommentEvent'>
    <div class='Card-action ticker-event__summary'>
      <ticker-avatar
        source='[[event.actor]]'
        class='ticker-event__summary-actor-avatar'></ticker-avatar>
      <span class='ticker-event__summary-actor'
        >[[event.actor.login]]</span>
      <span class='ticker-event__summary-action'>commented on</span>
      <span class='ticker-event__summary-subject'>
        <iron-icon
          class='ticker-event__summary-subject__icon'
          icon='github:git-commit'>
        </iron-icon><span>[[event.payload.comment.commit_id]]</span>
      </span>
    </div>
    <div class='Card-action Card-action--secondary'>
      <iron-icon icon='github:quote' class='c-gray-light self-start'></iron-icon>
      <span class='flex l-padding-l1'>[[event.payload.comment.body]]</span>
    </div>
  </template>

  <!-- <template is='x-template' id='WatchEvent'></template> -->
  <!-- <template is='x-template' id='ForkEvent'></template> -->

  <template is='x-template' id='PushEvent'>
    <div class='Card-action ticker-event__summary'>
      <ticker-avatar
        source='[[event.actor]]'
        class='ticker-event__summary-actor-avatar'></ticker-avatar>
      <span class='ticker-event__summary-actor'
        >[[event.actor.login]]</span>
      <span class='ticker-event__summary-action'>
        pushed
        <span>[[event.payload.commits.length]]</span>
        commits
      </span>
      <span class='ticker-event__summary-subject'>
        <iron-icon
          class='ticker-event__summary-subject__icon'
          icon='github:git-branch'>
        </iron-icon><span>[[branchFromRef(event.payload.ref)]]</span>
      </span>
    </div>
    <div>
      <template is='x-repeat' items='[[event.payload.commits]]'>
        <div class='Card-action Card-action--secondary'>
          <iron-icon icon='github:git-commit' class='c-gray-light'></iron-icon>
          <span class='flex l-padding-l1 t-truncate'>[[item.message]]</span>
        </div>
      </template>
    </div>
  </template>

</dom-module>

<dom-module id='ticker-event'>
  <template>
    <div class='Card-title'>
      <ticker-repo-name repo-name='[[event.repo.name]]' class='flex'></ticker-repo-name>
      <span class='c-gray-dark t-font-size-11'>[[event.timeAgo]]</span>
    </div>
  </template>
</dom-module>
<script src='ticker-event.js'></script>
