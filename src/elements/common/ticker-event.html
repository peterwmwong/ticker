<link rel='import' href='ticker-event-summary.html'>
<link rel='import' href='ticker-repo-name.html'>

<dom-module id='ticker-event-templates'>

  <template is='dom-template' id='IssuesEvent,PullRequestEvent'>
    <ticker-event-summary
      actor='[[event.actor]]'
      action='[[event.payload.action]]'
      subject-icon='[[issuePRIcon(event)]]'
      subject='[[issuePRSubject(event)]]'></ticker-event-summary>
  </template>

  <template is='dom-template' id='ReleaseEvent'>
    <ticker-event-summary
      actor='[[event.actor]]'
      action='published a release'
      subject-icon='github:versions'
      subject='[[releaseSubject(event)]]'></ticker-event-summary>
  </template>

  <template is='dom-template' id='CreateEvent,DeleteEvent'>
    <ticker-event-summary
      actor='[[event.actor]]'
      action='[[createDeleteAction(event)]]'
      subject-icon='[[createDeleteIcon(event)]]'
      subject='[[createDeleteSubject(event)]]'></ticker-event-summary>
  </template>

  <template is='dom-template' id='IssueCommentEvent,PullRequestReviewCommentEvent'>
    <ticker-event-summary
      actor='[[event.actor]]'
      action='commented on'
      subject-icon='[[issuePRIcon(event)]]'
      subject='[[issuePRSubject(event)]]'></ticker-event-summary>

    <div class='ticker-event__action'>
      <iron-icon icon='github:quote' class='ticker-event__action__icon'></iron-icon>
      <span class='ticker-event__action__text'>[[event.payload.comment.body]]</span>
    </div>
  </template>

  <template is='dom-template' id='CommitCommentEvent'>
    <ticker-event-summary
      actor='[[event.actor]]'
      action='commented on'
      subject-icon='github:git-commit'
      subject='[[event.payload.comment.commit_id]]'></ticker-event-summary>
    <div class='ticker-event__action'>
      <iron-icon icon='github:quote' class='ticker-event__action__icon'></iron-icon>
      <span class='ticker-event__action__text'>[[event.payload.comment.body]]</span>
    </div>
  </template>

  <template is='dom-template' id='PushEvent'>
    <ticker-event-summary
      actor='[[event.actor]]'
      action='[[pushAction(event)]]'
      subject-icon='github:git-branch'
      subject='[[pushSubject(event)]]'></ticker-event-summary>

    <div>
      <template is='dom-repeat' items='[[event.payload.commits]]'>
        <div class='ticker-event__action'>
          <iron-icon icon='github:git-commit' class='ticker-event__action__icon'></iron-icon>
          <span class='ticker-event__action__text'>[[item.message]]</span>
        </div>
      </template>
    </div>
  </template>

  <!--
  Currently Unsupported Github Events
  ===================================

  - WatchEvent
  - ForkEvent
  - TeamAddEvent
  -->

</dom-module>

<dom-module id='ticker-event'>
  <template>
    <div class='Card-title'>
      <ticker-repo-name repo-name='[[event.repo.name]]' class='flex'></ticker-repo-name>
      <span class='c-gray-dark t-font-size-11'>[[event.timeAgo]]</span>
    </div>
  </template>
</dom-module>
<script src='ticker-event.js'></script>
