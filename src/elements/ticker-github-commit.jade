link(rel='import' href='../../bower_components/core-scroll-header-panel/core-scroll-header-panel.html')
link(rel='import' href='../../bower_components/core-toolbar/core-toolbar.html')
link(rel='import' href='../../bower_components/paper-fab/paper-fab.html')
link(rel='import' href='../../bower_components/paper-tabs/paper-tabs.html')
link(rel='import' href='../../bower_components/paper-icon-button/paper-icon-button.html')
link(rel='import' href='./cards/ticker-github-events-card.html')
link(rel='import' href='../../vendor/highlightjs/highlightjs-import.html')

polymer-element(
  name='ticker-github-commit-highlight-syntax'
  extends='pre'
  attributes='source language')
  script.
    Polymer({
      ready:function(){
        if(this.language && this.source)
          this.innerHTML = hljs.highlight(this.language, this.source || '').value;
      }
    })

+polymer-element(attributes='isNarrow')
  template#fileDiff
    pre(class='c-bg-white l-padding-h4 l-padding-v3' style='overflow-x: auto')

  core-scroll-header-panel(fit)
    
    div(layout vertical center class='l-margin-t3 l-padding-h2')
      template(repeat='{{state.commit.files}}')
        .Card(style='max-width: 640px; width: 100%')
          .Card-subject(class='l-padding-2 l-padding-b1')
            | [[filename]]
          pre(
            is='ticker-github-commit-highlight-syntax'
            source='[[patch]]'
            language='diff'
            class='c-bg-gray-lightester l-margin-0 l-overflow-x-auto l-padding-h4 l-padding-t2 u-border-0')
            
    core-toolbar
      paper-icon-button(
        class='l-margin-r0'
        icon='arrow-back'
        on-tap='[[stateFire.goBack]]')
        
      span#titleText(class='t-font-size-20 t-normal')
        div(class='t-truncate')
          | {{state.commit.message}}
      
